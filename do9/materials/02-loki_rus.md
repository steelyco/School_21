# Loki

Loki — это горизонтально масштабируемая, высокодоступная многопользовательская система агрегации логов, вдохновленная Prometheus. Loki разработан, чтобы быть очень экономичным и простым в эксплуатации.

Loki так же, как и Prometheus, обладает клиент-серверной архитектурой с ядром в Loki, который хранит логи всей системы, и многочисленными агентами — локальными сборщиками метрик (promtail), которые передают сами логи Loki.

Чтобы получить логи из Loki, нужно воспользоваться запросом в специальном языке — LogQL, похожем на PromQL.

Стандартный запрос LogQL состоит из двух частей: селектора и фильтра. Селектор используется для поиска по меткам, по которым индексируются логи в Loki, а фильтр — для высеивания нужного подмножества выбранных селектором логов при помощи поискового запроса или регулярного выражения.

Например:

```
{cluster="ops-tools1",container="ingress-nginx"}
    | json
    | __error__ != "JSONParserErr"
```
где
`{cluster="ops-tools1",container="ingress-nginx"}` — это селектор, а `| json` и `| __error__ != "JSONParserErr"` — это фильтры.
